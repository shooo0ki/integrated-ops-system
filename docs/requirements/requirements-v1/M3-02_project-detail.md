# M3-02 プロジェクト詳細 — 要件定義 v1

## 機能要件

| 優先度 | 要件 |
|--------|------|
| Must | PJ の基本情報（名称・ステータス・期間・クライアント・所属会社）を表示する |
| Must | ポジション一覧（名称・必要人数・現充足人数・空き状況）を表示する |
| Must | アサイン済みメンバーリスト（名前・ポジション・月間工数・期間）を表示する |
| Must | 契約形態・月額契約金額は管理者のみ表示する |
| Must | 管理者・マネージャー（担当 PJ のみ）に「編集」ボタンを表示する |
| Must | 管理者・マネージャーに「アサイン管理」ボタン・「工数管理」ボタンを表示する |
| Must | 存在しない PJ ID は 404 を返す |
| Must | 社員・インターンはアサインされている PJ のみ閲覧可（それ以外は 403） |
| Should | メンバー名クリックで M1-02 メンバー詳細に遷移する |
| Should | 「アサイン管理」ボタンで M3-04 に遷移する |
| Should | 「工数管理」ボタンで M3-05 に遷移する |

## 受け入れ条件（Acceptance Criteria）

- [ ] 管理者でアクセスすると全情報（契約形態・月額含む）が表示される
- [ ] マネージャーでアクセスすると契約形態・月額が非表示
- [ ] 社員・インターンがアサインされた PJ の詳細を開ける（限定項目）
- [ ] 社員・インターンがアサインされていない PJ にアクセスすると 403 が返る
- [ ] 存在しない PJ ID にアクセスすると 404 が返る
- [ ] ポジション一覧で必要人数と充足人数が正しく表示される
- [ ] 「編集」ボタンで M3-03 に遷移する
- [ ] 「アサイン管理」ボタンで M3-04 に遷移する

## データ要件

| エンティティ | 項目 | 表示条件 |
|------------|------|---------|
| `PROJECT` | id, name, status, company, client_name, start_date, end_date, description | 全ロール |
| `PROJECT` | contract_type, monthly_contract_amount | 管理者のみ |
| `PROJECT_POSITION` | id, name, required_count | 全ロール |
| `PROJECT_ASSIGNMENT` | member_id, position_id, workload_hours, start_date, end_date | 全ロール（表示条件準拠） |
| `MEMBER` | id, name | アサイン一覧のリンク用 |

充足人数 = `PROJECT_ASSIGNMENT` の対象ポジションにアクティブなアサインが何件あるか

## 非機能要件（暫定）

| 区分 | 内容 |
|------|------|
| 性能 | ページ表示 3 秒以内 |
| セキュリティ | 認証必須。契約金額は管理者のみ API レスポンスに含める（サーバー側検証） |
| 監査 | 詳細閲覧ログを記録 |
| ログ | 403 / 404 発生をサーバーログに記録 |

## 想定エラーと対処

| エラー条件 | 表示 / 挙動 | 対処方針 |
|-----------|------------|---------|
| 存在しない PJ ID | 404 ページ | — |
| 権限外 PJ へのアクセス | 403 ページ | — |
| データ取得失敗 | エラートースト | リロード案内 |
