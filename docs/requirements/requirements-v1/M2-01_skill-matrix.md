# M2-01 スキルマトリクス — 要件定義 v1

## 機能要件

| 優先度 | 要件 |
|--------|------|
| Must | 全メンバーのスキルレベル（1〜5）をマトリクス形式（行: メンバー / 列: スキル）で一覧表示する |
| Must | 未評価のセルは「—」（グレー背景）で表示する |
| Must | スキルレベルを色分けで表示する（1=グレー / 2=黄 / 3=緑 / 4=青 / 5=紫） |
| Must | 最終スキル更新日を表示し、3 ヶ月以上未更新のメンバーをオレンジで強調する |
| Must | スキルカテゴリ / 最低レベル / 所属会社でフィルタリングができる |
| Must | セルクリックで M2-03 スキル評価入力に遷移する（評価編集権限を持つロールのみ） |
| Must | メンバー名クリックで M1-02 メンバー詳細に遷移する |
| Must | スキル項目が 0 件の場合、案内メッセージを表示する |
| Should | インターンは自分のスキル行のみ表示する |
| Should | カテゴリでグループ化して列を表示する |

## 受け入れ条件（Acceptance Criteria）

- [ ] 管理者でアクセスすると全メンバーのスキルマトリクスが表示される
- [ ] レベル 3 のセルは緑色で表示される
- [ ] 未評価のセルは「—」グレー背景で表示される
- [ ] 最終更新日が 3 ヶ月超過のメンバー行がオレンジ強調される
- [ ] カテゴリフィルターで「エンジニアリング」を選択すると、対応カテゴリの列のみ表示される
- [ ] 最低レベル 3 以上フィルター適用で、指定スキルが 3 未満のメンバーが非表示になる
- [ ] スキル項目が未登録の場合「スキルが未登録です。M2-02 でスキルを追加してください」が表示される
- [ ] インターンでアクセスすると自分の行のみ表示される
- [ ] 管理者がセルをクリックすると M2-03 に遷移する
- [ ] 社員がセルをクリックしても編集画面に遷移しない（閲覧のみ）

## データ要件

| エンティティ | 項目 | 備考 |
|------------|------|------|
| `MEMBER` | id, name, company | 行データ |
| `SKILL_CATEGORY` | id, name, display_order | 列グループ |
| `SKILL` | id, name, category_id, display_order | 列データ |
| `MEMBER_SKILL` | member_id, skill_id, level (1〜5), evaluated_at | セルデータ |

「最終スキル更新日」= 当該メンバーの全 `MEMBER_SKILL.evaluated_at` の最大値

## 非機能要件（暫定）

| 区分 | 内容 |
|------|------|
| 性能 | マトリクス表示 3 秒以内（最大 100 名 × 50 スキル程度を想定） |
| セキュリティ | 認証必須。インターンの他メンバー閲覧はサーバー側でも制限 |
| 監査 | 評価変更操作のログを記録（M2-03 側で管理） |
| ログ | データ取得エラーをサーバーログに記録 |

## 想定エラーと対処

| エラー条件 | 表示 / 挙動 | 対処方針 |
|-----------|------------|---------|
| スキル項目が 0 件 | 「スキルが未登録です。M2-02 でスキルを追加してください」 | 管理者向けリンクを表示 |
| データ取得失敗 | エラートースト | リロード案内 |
