# C-02 ダッシュボード

## 目的
ログイン直後のトップページ。各モジュールへの導線と、ロールに応じた重要情報のサマリーを提供する。

## 対象ペルソナ / シナリオ
- 佐藤（管理者）: PL・人員状況のクイック確認
- 田中（マネージャー）: 担当 PJ の稼働状況確認
- 鈴木・山田: 打刻画面（M4-03）への最短導線

## UI 構成
- ヘッダー（ナビゲーション、ユーザー名、ログアウト）
- クイックアクション（打刻ボタン ― 社員/インターン向け）
- お知らせ・アラートエリア（未打刻アラート、月末締め通知など）
- モジュールカードグリッド（M1〜M6 へのリンク）
- ロール別サマリーウィジェット

## ワイヤーフレーム（文章での概要）
### レイアウト全体
- 1カラムベースの縦積み。主要カードは視線順に上から「自分→チーム→全体」の順で配置する。

### セクション順
1. **ヘッダー**
   - 左: ロゴ「統合業務管理」
   - 中央: グローバルナビ（ダッシュボード / メンバー / 勤怠 / プロジェクト / 請求 / PL/CF）
   - 右: ユーザー名 + 所属会社切替トグル（Boost / SALT2）
2. **クイックアクションカード**
   - タイトル: 「今日の勤怠」
   - 本文: 現在のステータス（未出勤 / 出勤中 / 退勤済）、出勤・退勤ボタン（状態で切替）
   - サブ情報: 本日のタスク、Slack通知先、想定実働/実績
   - リンク: 「勤怠一覧を見る」（M4-04）
3. **自分の週間スケジュール（カード幅1列）**
   - 横スクロールの帯状カレンダー（行=自分、列=日付）。予定=薄色、実績=濃色、打刻漏れ=オレンジ。
   - ラベル: 勤務開始〜終了時刻をツールチップ表示。
4. **担当プロジェクトカード（2列グリッド）**
   - 行ごとに: プロジェクト名 + 会社ラベル（Boost / SALT2タグ）
   - 内容: 役割、稼働配分（例: 40h/月・60%）、ステータス（進行中など）
   - クリックで M3-02 プロジェクト詳細へ。
5. **チーム在席状況（1列カード）**
   - リスト: メンバー名 / 会社タグ / 本日のステータス（出勤・未出勤・休憩）をアイコンと色で表示。
   - 全員が閲覧可。メンバー名クリックでメンバー詳細（週スケジュールが最上部に表示）。
6. **全体カレンダー（フル幅）**
   - タブ: 週 / 月 切替。フィルター: プロジェクト、会社、メンバー。
   - グリッド: 行=メンバー、列=日付。予定=薄緑、実績=濃緑、打刻漏れ=オレンジ。
7. **サマリーブロック（管理者/マネージャーのみ表示部分はロールで出し分け）**
   - 管理者: 未打刻メンバー数、月末締め確認待ち、全社PL粗利、会社別請求見込み（Boost / SALT2）
   - マネージャー: 担当PJの稼働率、未打刻メンバー（担当のみ）
8. **フッター**
   - ショートカットリンク: 勤務予定登録、打刻画面、請求書一覧、PL/CF（管理者のみ）

### モバイル簡易版
- 同じ順序で1カラム縦積み。全体カレンダーは週ビューのみ表示、横スクロール。
- プロジェクトカードはアコーディオンで折りたたみ、在席リストはコンパクト表示。

## ワイヤーフレーム（簡易ASCIIスケッチ）
```
┌─────────────────────────────────────────────── ヘッダー ────────────────────────────────────────────────┐
│ ロゴ | ダッシュボード | メンバー | 勤怠 | プロジェクト | 請求 | PL/CF | 会社: [Boost▼] | ユーザー名 | Logout │
└────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────── お知らせ・アラート ────────────────────────────────┐
│ 未打刻 2名（リンク→勤怠一覧） | 月末締め確認待ち 3名（リンク→M5-01） | Slack送信失敗 1件（再送） │
└──────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────── 今日の勤怠（クイックアクション） ───────────────────────────────┐
│ 状態: 出勤中 / 未出勤 / 退勤済                          Slack通知先: #attendance                  │
│ [ 出勤する / 退勤する ]    今日のタスク: ＿＿＿＿＿＿＿＿＿                                     │
│ 実働(見込み): 5.0h   会社別請求見込み: Boost ¥60k / SALT2 ¥40k（本人・管理者のみ表示）          │
│ link → 勤怠一覧（M4-04）                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────── 自分の週間スケジュール ────────────────────────────────┐
│ 月  ─────10:00-19:00─────                                                                   │
│ 火  ───────────────（休み）                                                                │
│ 水  ───10:00-15:00───（打刻漏れ=🟧）                                                        │
│ 木  ──────12:00-20:00─────                                                                 │
│ 金  ─10:00-18:00──                                                                          │
│ 土  休  日                                                                                  │
│ 日  休  日                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────── 担当プロジェクト ───────────────────┐   ┌─────────────────── 担当プロジェクト ───────────────────┐
│ [Boost] 新規SaaS開発            役割: FE   稼働: 60%    │   │ [SALT2] 内部ツール改善          役割: BE   稼働: 40%    │
│ ステータス: 進行中   → 詳細(M3-02)                      │   │ ステータス: 進行中   → 詳細(M3-02)                      │
└────────────────────────────────────────────────────────┘   └────────────────────────────────────────────────────────┘

┌────────────────────────────── チーム在席状況（全員閲覧可） ───────────────────────────────┐
│ 佐藤 [Boost] 🟢出勤中   | 田中 [Boost] 🟠休憩   | 鈴木 [SALT2] ⚪未出勤   | 山田 [Boost] 🔴打刻漏れ候補 │
│ （名前クリックでメンバー詳細。詳細ページの最上部に週スケジュールを表示）                          │
└───────────────────────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────── 全体カレンダー（週/月切替） ───────────────────────────────────┐
│ フィルタ: 会社[All/Boost/SALT2]  プロジェクト[▼]  メンバー[▼]                                      │
│        月      火      水      木      金      土      日                                           │
│ 佐藤   ░░░     ▓▓▓     ░░░     ▓▓▓     ░░░     □□     □□                                            │
│ 田中   ░░░     ░░░     ░░░     ▓▓▓     ░░░     □□     □□                                            │
│ 鈴木   ░░░     ░░░     🟧       ░░░     ▓▓▓     □□     □□                                            │
│ 山田   ░░░     ░░░     ░░░     ░░░     🟧       □□     □□                                            │
│ （薄=予定░、濃=実績▓、🟧=打刻漏れ候補）                                                             │
└────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────── サマリー（ロールで出し分け） ───────────────────────┐
│ 管理者: 未打刻 3名 / 締め確認待ち 2名 / 当月PL粗利 ¥3.2M / 会社別請求 Boost ¥1.8M | SALT2 ¥1.1M │
│ マネージャー: 担当PJ稼働率 82% / 未打刻 1名（担当のみ）                                                         │
└───────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────── フッター ───────────────────────────────────────────────────────────────┐
│ 勤務予定登録 | 打刻画面 | 勤怠一覧 | 請求書一覧 | PL/CF（管理者のみ）                                                                       │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```


## 表示項目
| ウィジェット | 表示条件 |
|-------------|---------|
| 本日の打刻状態（出勤済 / 未打刻） | 社員・インターン |
| 未打刻メンバー数（赤バッジ） | 管理者・マネージャー |
| 月末締め状況（確認待ち人数） | 管理者 |
| 担当 PJ 一覧（進行中のみ） | マネージャー |
| 全社 PL 粗利（当月） | 管理者 |

## 操作
| 操作 | 遷移先 |
|------|--------|
| 打刻ボタン（出勤 / 退勤） | M4-03 打刻画面 |
| 各モジュールカードクリック | 各モジュールトップ画面 |
| アラートクリック | 該当画面（例: M5-01, M4-04）|

## エラー / 例外
| 条件 | 挙動 |
|------|------|
| ウィジェットデータ取得失敗 | 該当ウィジェットに「データを取得できませんでした」と表示し他には影響しない |

## 権限（ロール別）
| ロール | 表示ウィジェット |
|--------|----------------|
| 管理者 | 全ウィジェット |
| マネージャー | 担当 PJ / 打刻状態 |
| 社員 | 打刻状態 / モジュールカード（権限内のみ） |
| インターン | 打刻状態 / 限定モジュールカード |

## 関連データ（エンティティ）
- `ATTENDANCE`、`PROJECT`、`PROJECT_ASSIGNMENT`、`PL_RECORD`、`INVOICE`

## 関連 API
- `GET /api/dashboard/summary`
- `GET /api/attendance/today`
