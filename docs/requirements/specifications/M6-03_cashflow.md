# M6-03 キャッシュフロー管理

## 目的
月次の入金・支出を管理し、会社のキャッシュ残高推移を可視化する。

## 対象ペルソナ / シナリオ
- 佐藤（管理者）: 月次資金繰り確認

## UI 構成
- 対象月選択
- キャッシュフロー入力テーブル（キャッシュイン / アウト別）
- 月次残高推移グラフ
- 前月残高表示

## 表示項目
| 区分 | 項目 | 入力方式 |
|------|------|---------|
| キャッシュイン | クライアント入金 | 手動入力 |
| キャッシュイン | その他入金 | 手動入力 |
| キャッシュアウト | 給与支払い | 自動計算（請求書確定額） |
| キャッシュアウト | 外注費支払い | 手動入力 |
| キャッシュアウト | 固定費 | 手動入力 |
| キャッシュアウト | その他支出 | 手動入力 |
| 合計 | 月次収支 | 自動計算 |
| 合計 | 月末残高 | 自動計算（前月残高 + 月次収支） |

## 入力項目
| 項目 | 必須 | 制約 | 例 |
|------|------|------|----|
| 前月繰越残高（初回のみ） | 必須 | 整数 | `3000000` |
| 各キャッシュイン金額 | 任意 | 0 以上の整数 | `500000` |
| 各キャッシュアウト金額 | 任意 | 0 以上の整数 | `200000` |
| 備考 | 任意 | 最大 200 文字 | `〇〇社 3 月分入金` |

## 操作
| 操作 | 説明 |
|------|------|
| 月切り替え | 前月・翌月ナビ |
| 金額入力 | セル直接入力 |
| 保存 | 変更を保存 |

## エラー / 例外
| 条件 | 挙動 |
|------|------|
| 前月残高未設定 | 「前月残高を入力してください（初回設定）」 |

## 権限（ロール別）
| ロール | アクセス |
|--------|---------|
| 管理者 | フルアクセス |
| その他 | アクセス不可 |

## 関連データ（エンティティ）
- `PL_RECORD`（CF 区分）、`INVOICE`

## 関連 API
- `GET /api/cashflow?month=`
- `PUT /api/cashflow`
