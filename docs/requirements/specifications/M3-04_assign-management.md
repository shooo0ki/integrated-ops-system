# M3-04 アサイン管理

## 目的
プロジェクトの各ポジションにメンバーをアサインする。スキルフィルタリングで適材適所の判断を支援する。S3 シナリオの核心画面。

## 対象ペルソナ / シナリオ
- 田中（マネージャー）・佐藤（管理者）: S3 アサイン登録

## UI 構成
- PJ ヘッダー（PJ 名・ポジション一覧）
- ポジション選択タブ
- 必要スキル表示エリア（選択ポジションの要件）
- スキルフィルタートグル（ON: 要件充足メンバーのみ / OFF: 全員）
- メンバー候補テーブル（スキル充足状況・現在の月間工数表示）
- アサイン登録フォーム（期間・月間想定工数）

## 入力項目
| 項目 | 必須 | 制約 | 例 |
|------|------|------|----|
| 対象メンバー | 必須 | メンバー一覧から選択 | — |
| ポジション | 必須 | 既存ポジションから選択 | `PM` |
| 月間想定工数（時間） | 必須 | 0 より大きい整数 | `80` |
| アサイン開始日 | 必須 | YYYY-MM-DD | `2026-03-01` |
| アサイン終了日 | 任意 | 開始日以降 | — |

## 表示項目（メンバー候補テーブル）
| 項目 | 説明 |
|------|------|
| 氏名 | — |
| ポジション要件スキルの充足状況 | ✅ 充足 / ⚠️ 不足（レベル差を表示） |
| 現在のアサイン先・月間工数合計 | 稼働余力の判断材料 |

## 操作
| 操作 | 説明 |
|------|------|
| スキルフィルター ON/OFF | 候補テーブルを絞り込み（制約ではなくフィルター） |
| アサイン登録 | 指定ポジションにメンバーをアサイン |
| アサイン解除 | 既存アサインを解除（終了日を設定） |

## エラー / 例外
| 条件 | 挙動 |
|------|------|
| 同一 PJ・同一ポジションへの重複アサイン | 「このメンバーはすでにこのポジションにアサイン済みです」 |
| 月間工数が 0 | 「工数は 1 時間以上を入力してください」 |

## 権限（ロール別）
| ロール | 操作 |
|--------|------|
| 管理者 | 全 PJ アサイン管理 |
| マネージャー | 担当 PJ のみ |
| メンバー（社員・インターン共通） | 不可 |

## 関連データ（エンティティ）
- `PROJECT_ASSIGNMENT`、`PROJECT_POSITION`、`POSITION_REQUIRED_SKILL`、`MEMBER_SKILL`、`MEMBER`

## 関連 API
- `GET /api/projects/:id/assignments`
- `POST /api/projects/:id/assignments`
- `PUT /api/projects/:id/assignments/:assignId`
- `DELETE /api/projects/:id/assignments/:assignId`
- `GET /api/members?withSkills=true&withWorkload=true`
