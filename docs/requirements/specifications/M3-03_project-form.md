# M3-03 プロジェクト登録 / 編集

## 目的
プロジェクトの基本情報・ポジション定義・初期アサインメンバーを登録・更新する。

## 対象ペルソナ / シナリオ
- 佐藤（管理者）・田中（マネージャー）: 新規 PJ 立ち上げ

## UI 構成
1. プロジェクト基本情報フォーム
2. ポジション定義セクション（追加・削除・必要スキル設定）
3. **アサインメンバーセクション**（プロジェクト登録時に初期アサインを設定可能）
4. 保存ボタン / キャンセルボタン

> **設計メモ**: プロジェクトの終了日は任意。「ずっと続くプロジェクト」が存在するため
> 「期限なし」チェックボックスを設け、チェック時は終了日入力を非表示にする。

## 入力項目
### プロジェクト基本情報
| 項目 | 必須 | 制約 | 例 |
|------|------|------|----|
| プロジェクト名 | 必須 | 最大 200 文字 | `〇〇社 AI 開発` |
| 説明 | 任意 | 最大 1000 文字 | — |
| ステータス | 必須 | 計画中 / 進行中 / 完了 / 保留 | `進行中` |
| 所属会社 | 必須 | Boost / SALT2 | — |
| 開始日 | 必須 | YYYY-MM-DD | `2026-03-01` |
| 期限なし | — | チェックボックス。チェック時は終了日入力を非表示 | — |
| 終了日 | 任意 | 「期限なし」未チェック時のみ。開始日以降 | — |
| クライアント名 | 任意 | 最大 200 文字 | — |
| 契約形態 | 任意 | 準委任 / 請負 / 自社開発 / その他 | — |
| 月額契約金額 | 任意 | 0 以上の整数 | `500000` |

### ポジション定義（繰り返し）
| 項目 | 必須 | 制約 | 例 |
|------|------|------|----|
| ポジション名 | 必須 | 既存から選択 or 新規入力 | `PM` |
| 必要人数 | 必須 | 1 以上の整数 | `1` |
| 必要スキル（複数） | 任意 | スキル + 最低レベル | `フロントエンド Lv3` |

### アサインメンバー（初期設定、任意・後から M3-04 で追加変更可）
| 項目 | 必須 | 制約 | 例 |
|------|------|------|----|
| メンバー | 必須 | メンバー一覧から選択 | — |
| ポジション | 必須 | 上記ポジション定義から選択 | `PM` |
| 月間想定工数（時間） | 必須 | 1 以上の整数 | `80` |
| アサイン開始日 | 必須 | YYYY-MM-DD | `2026-03-01` |
| アサイン終了日 | 任意 | 「期限なし」も選択可 | — |

## 操作
| 操作 | 説明 |
|------|------|
| ポジション追加 | ポジション行を追加 |
| ポジション削除 | アサインがない場合のみ削除可 |
| アサインメンバー追加 | メンバー行を追加（複数可） |
| アサインメンバー削除 | 行を削除 |
| 保存 | バリデーション後に保存 |

## エラー / 例外
| 条件 | メッセージ |
|------|-----------|
| 終了日 < 開始日（期限なしでない場合） | 「終了日は開始日以降に設定してください」 |
| アサインありのポジション削除 | 「アサイン済みのポジションは削除できません」 |

## 権限（ロール別）
| ロール | 操作 |
|--------|------|
| 管理者 | 全 PJ 作成・編集 |
| マネージャー | 担当 PJ のみ編集 |
| メンバー | 不可 |

## 関連データ（エンティティ）
- `PROJECT`、`PROJECT_POSITION`、`POSITION_REQUIRED_SKILL`、`PROJECT_ASSIGNMENT`

## 関連 API
- `POST /api/projects`
- `PUT /api/projects/:id`
- `POST /api/projects/:id/positions`
- `PUT /api/projects/:id/positions/:posId`
- `POST /api/projects/:id/assignments`
